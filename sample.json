[{"id":"e5ebe94.3572d18","type":"id-foto","z":"8865382d.fca298","name":"Analisar Foto","func":"\nimport numpy as np\nimport cv2\n\n\nrecognizer = cv2.face.LBPHFaceRecognizer_create()\nrecognizer.read('/Users/poliana-ferreira/.node-red/trainner.yml')\ncascadePath = \"/Users/poliana-ferreira/.node-red/haarcascade_frontalface_default.xml\"\nfaceCascade = cv2.CascadeClassifier(cascadePath)\n\n\ncam = cv2.VideoCapture(0)\nfont = cv2.FONT_HERSHEY_SIMPLEX\nret, im =cam.read()\ngray=cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)\nfaces=faceCascade.detectMultiScale(gray, 1.2,5)\nId=\"Nenhum rosto encontrado\"\nfor(x,y,w,h) in faces:\n    cv2.rectangle(im,(x,y),(x+w,y+h),(225,0,0),2)\n    Id, conf = recognizer.predict(gray[y:y+h,x:x+w])\n    if(conf<50):\n        print(\"oi\")\n        if(Id==1):\n            Id=\"Poliana\"\n    else:\n        Id=\"Unknown\"\n    cv2.putText(im,str(Id),(x,y+h), font, 0.5,(255,255,255),2,cv2.LINE_AA)\nmsg['payload'] = {'id': Id}","nomeid":"Poliana","outputs":1,"x":422.5,"y":448,"wires":[["88d08fe6.80151","1e0a1252.a51a1e","a4703d0c.9b223"]]}]